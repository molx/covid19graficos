var starttimeBR,starttimeW,starttimeHS;function dateToDM(a){var b=a.getDate(),c=a.getMonth()+1;return""+(9>=b?"0"+b:b)+"/"+(9>=c?"0"+c:c)}function numberWithSep(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function isArray(a){return"[object Array]"===Object.prototype.toString.call(a)}function splat(a){return isArray(a)?a:[a]}function formatToChart(a,b,c="date"){const d=[...new Set(a.map(a=>a.location))];let e=[];return d.forEach(function(d){let f=a.filter(function(a){return a.location==d}),g=[],h=!0;f.forEach(function(a){(a[b]||!h)&&(h=!1,"date"==c?g.push([Date.parse(a[c]),a[b]]):g.push([a[c],a[b]]))}),e.push({name:d,data:g})}),e}function formatToColumnChart(a,b,c){let d=[{data:[]}];const e=Object.values(a).reduce((d,a)=>+d+a[c],0);for(i=0;i<a.length;i++)if("CFR"==c)d[0].data.push({name:a[i][b],y:a[i][c],color:myColors[i],deaths:a[i].total_deaths,cases:a[i].total_cases});else{let f=Math.round(1e4*a[i][c]/e)/100;d[0].data.push({name:a[i][b],y:a[i][c],color:myColors[i],pct:f})}d[0].data.sort((c,a)=>parseFloat(a.y)-parseFloat(c.y));let f=[...new Set(d[0].data.map(a=>a.name))];return{series:d,order:f}}function summarise(a,b,c,d,e,f=!1){isArray(c)||(c=[c]);var g=[];for(v=0;v<c.length;v++){g[c[v]]||(g[c[v]]={});for(let d=0;d<a.length;d++)g[c[v]][a[d][b]]?g[c[v]][a[d][b]]+=a[d][c[v]]:g[c[v]][a[d][b]]=a[d][c[v]]}var h={},k=[];for(i=0;i<Object.keys(g[c[0]]).length;i++){let a=Object.assign({},h),l=Object.keys(g[c[0]])[i];for(a[b]=l,a[d]=e,v=0;v<c.length;v++)a[c[v]]=f?0<i?Math.round(10000*(g[c[v]][l]-g[c[v]][Object.keys(g[c[v]])[i-1]])/g[c[v]][Object.keys(g[c[v]])[i-1]])/100:0:g[c[v]][l];k.push(a)}return k}function alignData(a,b,c){var d=[],e=[];for(i=0;i<a.length;i++)100<=a[i][b]&&d.push(a[i]);d.sort((c,a)=>c.location>a.location?1:a.location>c.location?-1:0);let f=d[0].location;for(e.push(d[0]),e[0][c]=1,i=1;i<d.length;i++)d[i].location==f?(e.push(d[i]),e[i][c]=e[i-1][c]+1):(e.push(d[i]),e[i][c]=1,f=d[i].location);return e}function getLastDate2(a){let b=a[a.length-1].date.getTime(),c=a.filter(function(a){return a.date.getTime()==b});return c}function getCFR(a,b=!0){let c=[];for(Object.assign(c,a),b&&(c=getLastDate(c)),i=0;i<c.length;i++)c[i].CFR=Math.round(10000*c[i].total_deaths/c[i].total_cases)/100,c[i].CFR=isNaN(c[i].CFR)?0:c[i].CFR;let d=c.filter(function(a){return 20<=a.total_deaths});return d}function daysToMs(a){return 1e3*(3600*(24*a))}var regioes={Sudeste:["S\xE3o Paulo","Rio de Janeiro","Minas Gerais","Esp\xEDrito Santo"],"Centro-Oeste":["Distrito Federal","Goi\xE1s","Mato Grosso","Mato Grosso do Sul"],Nordeste:["Maranh\xE3o","Piau\xED","Cear\xE1","Rio Grande do Norte","Para\xEDba","Pernambuco","Alagoas","Sergipe","Bahia"],Sul:["Paran\xE1","Santa Catarina","Rio Grande do Sul"],Norte:["Acre","Amazonas","Par\xE1","Rond\xF4nia","Roraima","Amap\xE1","Tocantins"]},acronyms={Acre:"AC",Alagoas:"AL",Amazonas:"AM",Bahia:"BA",Ceará:"CE","Distrito Federal":"DF","Espírito Santo":"ES",Goiás:"GO",Amapá:"AP",Maranhão:"MA","Mato Grosso":"MT","Mato Grosso do Sul":"MS","Minas Gerais":"MG",Paraná:"PR",Paraíba:"PB",Pará:"PA",Pernambuco:"PE",Piauí:"PI","Rio Grande do Norte":"RN","Rio Grande do Sul":"RS","Rio de Janeiro":"RJ",Rondônia:"RO",Roraima:"RR","Santa Catarina":"SC",Sergipe:"SE","São Paulo":"SP",Tocantins:"TO"},nomesEstados=Object.keys(acronyms).sort();regioes.Brasil=nomesEstados;var myColors=["#2b547e"].concat(palette("mpn65",26).map(a=>"#"+a)),highchartsOptions=Highcharts.setOptions({lang:{loading:"Aguarde...",months:["Janeiro","Fevereiro","Mar\xE7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],weekdays:["Domingo","Segunda","Ter\xE7a","Quarta","Quinta","Sexta","S\xE1bado"],shortMonths:["Jan","Feb","Mar","Abr","Maio","Jun","Jul","Ago","Set","Out","Nov","Dez"],viewFullscreen:"Ver em tela cheia",exitFullscreen:"Sair da tela cheia",printChart:"Imprimir",rangeSelectorFrom:"De",rangeSelectorTo:"At\xE9",rangeSelectorZoom:"Periodo",downloadPNG:"Download imagem PNG",downloadJPEG:"Download imagem JPEG",downloadPDF:"Download documento PDF",downloadSVG:"Download imagem SVG",numericSymbols:null,thousandsSep:".",resetZoom:"Resetar zoom"},chart:{spacingBottom:16,zoomType:"x",resetZoomButton:{position:{x:-150,y:10},relativeTo:"chart",theme:{height:14}},panning:!0,panKey:"ctrl"},yAxis:{endOnTick:!1},title:{align:"left"},subtitle:{align:"left",y:30,margin:0},caption:{text:"Fonte: Minist\xE9rio da Sa\xFAde",margin:0,y:25},credits:{text:"covid19graficos.com.br",href:"http://covid19graficos.com.br",position:{x:-12}},colors:myColors});function changeType(a,b){a.yAxis[0].isLog?(a.yAxis[0].update({type:"linear"},!1,!1,!1),a.exportSVGElements[2].attr({text:"Logar\xEDtmica"})):(a.yAxis[0].update({type:"logarithmic"},!1,!1,!1),a.exportSVGElements[2].attr({text:"Linear"})),a.redraw(b)}function createLineChart(a){Highcharts.chart({chart:{renderTo:a,type:"line",styledMode:!1},data:{dateFormat:"YYYY-mm-dd"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%d/%m"},tickInterval:daysToMs(1),labels:{rotation:-45}},yAxis:{min:1,labels:{format:"{value:,.0f}"}},legend:{enabled:!1},plotOptions:{line:{marker:{enabled:!0,radius:3}}},tooltip:{crosshairs:!0,shared:!0,dateTimeLabelFormats:{day:"%A, %d/%m/%Y"},outside:!0,formatter:function(a){var b=this.points||splat(this),c=b[0].series;return b.sort(function(c,a){return c.y<a.y?1:c.y>a.y?-1:0}),a.defaultFormatter.call(this,a)}},defs:{custombtn:{tagName:"pattern",id:"custom-btn-bg",width:100}},exporting:{buttons:{customButton:{text:"Logar\xEDtmica",id:"btn",onclick:function(){changeType(this,!0)},theme:{width:70,"text-align":"center"}}}}})}function createColumnChart(a,b=null){Highcharts.chart(a,{chart:{type:"column"},plotOptions:{series:{groupPadding:0,colorByPoint:!1}},tooltip:{shared:!0,formatter:function(){var a,c=this.point,d=this.series;return a=this.points[0].point.pct,name=this.points[0].point.name,"<small>"+name+"</small>:<br><b>"+this.y+"</b> ("+a+"% dos "+b+")"}},legend:{align:"center",floating:!1,verticalAlign:"bottom",layout:"horizontal",enabled:!1,labelFormatter:function(){return acronyms[this.name]}}})}const msGetURL="https://xx9p7hp1p7.execute-api.us-east-1.amazonaws.com/prod/PortalGeral";let brasilDataSource,rawBrasilData,brasilData;var loadedBrasilData=!1,loadedWorldData=!1;function parseBrasilData(a){if(console.log("Time to download Brasil data: "+(new Date().getTime()-starttimeBR)+"ms"),starttimeBR=new Date().getTime(),a){parsedData=Papa.parse(rawBrasilData,{header:!0,dynamicTyping:!0,skipEmptyLines:!0}).data,console.log("Time to parse Brasil data: "+(new Date().getTime()-starttimeBR)+"ms"),starttimeBR=new Date().getTime();let a=Object.values(parsedData[0]),b="string"==typeof a[2]&&3==a[2].split("/").length,c=Object.keys(parsedData[0]);if(!b)console.log("Succesfully fetched MS data but date column is invalid, using manual data instead.");else if(!["data","estado","casosNovos","casosAcumulados","obitosNovos","obitosAcumulados"].every(a=>c.includes(a)))console.log("Succesfully fetched MS data but at least one column is missing or misnamed.");else{parsedData.map(a=>a.date=a.date.split("/").reverse().join("-")),parsedData.map(a=>a.location=Object.keys(acronyms).find(b=>acronyms[b]===a.location));let a=new Date(estados[estados.length-1].date).getTime(),b=new Date(parsedData[parsedData.length-1].date).getTime();b>a?(console.log("Succesfully fetched MS data."),estados=parsedData):console.log("Succesfully fetched MS data but file is outdated or corrupted, using manual data instead.")}}console.log("Time to check Brasil MS data: "+(new Date().getTime()-starttimeBR)+"ms"),starttimeBR=new Date().getTime(),brasilData=summarise(estados,"date",["total_cases","total_deaths","new_cases","new_deaths"],"location","Brasil"),console.log("Time to summarise Brasil data: "+(new Date().getTime()-starttimeBR)+"ms"),starttimeBR=new Date().getTime(),brasilData=addColumns(brasilData),estados=addColumns(estados),loadedBrasilData=!0,console.log("Time to process Brasil data: "+(new Date().getTime()-starttimeBR)+"ms"),loadedWorldData&&(generatePlots(),loadedBrasilData=!1)}let rawWorldData,worldData;const worldDataSource="https://covid.ourworldindata.org/data/ecdc/full_data.csv",worldCompare=["Italy","United States","Spain","Germany","United Kingdom","South Korea","Brazil"],worldTrad={"United States":"EUA",Italy:"It\xE1lia",Spain:"Espanha",Germany:"Alemanha","United Kingdom":"Reino Unido","South Korea":"Coreia do Sul",World:"Mundo",Brazil:"Brasil",Brazil:"Brasil"};function parseWorldData(){console.log("Time to download World data: "+(new Date().getTime()-starttimeW)+"ms"),starttimeW=new Date().getTime(),worldData=Papa.parse(rawWorldData,{header:!0,dynamicTyping:!0,skipEmptyLines:!0}).data,console.log("Time to parse World data: "+(new Date().getTime()-starttimeW)+"ms"),starttimeW=new Date().getTime(),worldData=addColumns(worldData),loadedWorldData=!0,console.log("Time to process World data: "+(new Date().getTime()-starttimeW)+"ms"),loadedBrasilData&&(generatePlots(),loadedWorldData=!1)}function addColumns(a){let b=86400000,c=[];a.map(a=>a.date=new Date(a.date));let e=[...new Set(a.map(a=>a.location))];for(i=0;i<e.length;i++){let d=1/0,f=1/0,g=a.filter(a=>a.location==e[i]);for(g[0].change_cases=0,g[0].change_deaths=0,j=1;j<g.length;j++)g[j].change_cases=Math.round(10000*g[j].new_cases/g[j-1].total_cases)/100,g[j].change_deaths=Math.round(10000*g[j].new_deaths/g[j-1].total_deaths)/100,d==1/0&&100<=g[j].total_cases&&(d=g[j].date),f==1/0&&100<=g[j].total_deaths&&(f=g[j].date),g[j].day_cases=(g[j].date-d)/b+1,g[j].day_deaths=(g[j].date-f)/b+1,g[j].CFR=Math.round(10000*g[j].total_deaths/g[j].total_cases)/100;c=c.concat(g)}return c}function addColumns2(a){let b=86400000;a.map(a=>a.date=new Date(a.date));let c=[...new Set(a.map(a=>a.location))],d={},e={};for(i=0;i<c.length;i++){let b=a.find(a=>a.location==c[i]&&100<=a.total_cases);d[c[i]]=b?b.date:1/0;let f=a.find(a=>a.location==c[i]&&100<=a.total_deaths);e[c[i]]=f?f.date:1/0}for(i=0;i<a.length;i++){let c=a.find(c=>a[i].location==c.location&&a[i].date.getTime()-c.date.getTime()==b);c?(a[i].change_cases=Math.round(10000*a[i].new_cases/c.total_cases)/100,a[i].change_deaths=Math.round(10000*a[i].new_deaths/c.total_deaths)/100,a[i].change_cases=isNaN(a[i].change_cases)?0:a[i].change_cases,a[i].change_deaths=isNaN(a[i].change_deaths)?0:a[i].change_deaths):(a[i].change_cases=0,a[i].change_deaths=0),a[i].day_cases=(a[i].date-d[a[i].location])/b+1,a[i].day_deaths=(a[i].date-e[a[i].location])/b+1,a[i].CFR=Math.round(10000*a[i].total_deaths/a[i].total_cases)/100,a[i].CFR=isNaN(a[i].CFR)?0:a[i].CFR}return a}function pad(a){return 10>a?"0"+a:a}function generatePlots(){starttimeHS=new Date().getTime();var a=brasilData[brasilData.length-1].total_cases,b=brasilData[brasilData.length-1].total_deaths,c=Math.round(10000*b/a)/100,d=brasilData[brasilData.length-1].date,e=pad(d.getUTCDate())+"/"+pad(d.getUTCMonth()+1)+"/"+d.getUTCFullYear();$("#data_br_dia").html(e),$("#data_br_casos").html(numberWithSep(a)),$("#data_br_obitos").html(numberWithSep(b)),$("#data_br_CFR").html(c.toString().replace(".",",")+"%"),createLineChart("br_casos"),$("#br_casos").highcharts().addSeries({name:"Total de casos",data:formatToChart(brasilData,"total_cases")[0].data},!1),$("#br_casos").highcharts().update({yAxis:{title:{text:"Casos confirmados"}},title:{text:"Casos confirmados"}}),createLineChart("br_obitos"),$("#br_obitos").highcharts().addSeries({name:"Total de \xF3bitos",data:formatToChart(brasilData,"total_deaths")[0].data},!1),$("#br_obitos").highcharts().update({yAxis:{title:{text:"\xD3bitos"}},title:{text:"\xD3bitos"}}),createLineChart("br_novoscasos"),$("#br_novoscasos").highcharts().addSeries({name:"Novos casos",yAxis:0,data:formatToChart(brasilData,"new_cases")[0].data},!1),$("#br_novoscasos").highcharts().update({yAxis:{title:{text:"Novos casos",style:{color:myColors[0]}},labels:{style:{color:myColors[0]}},min:0},title:{text:"Novos casos"},exporting:{buttons:{customButton:{enabled:!1}}}},!1),$("#br_novoscasos").highcharts().addAxis({title:{text:"Varia\xE7\xE3o em rela\xE7\xE3o ao dia anterior",style:{color:myColors[1]}},min:0,max:100,opposite:!0,labels:{format:"{value}%",style:{color:myColors[1]}}},!1),$("#br_novoscasos").highcharts().addSeries({name:"Aumento",yAxis:1,data:formatToChart(brasilData,"change_cases")[0].data,tooltip:{valueSuffix:"%"}},!0),createLineChart("br_novosobitos"),$("#br_novosobitos").highcharts().addSeries({name:"Novos \xF3bitos",data:formatToChart(brasilData,"new_deaths")[0].data},!1),$("#br_novosobitos").highcharts().update({yAxis:{title:{text:"Novos \xF3bitos",style:{color:myColors[0]}},labels:{style:{color:myColors[0]}},min:0},title:{text:"Novos \xF3bitos"},exporting:{buttons:{customButton:{enabled:!1}}}},!1),$("#br_novosobitos").highcharts().addAxis({title:{text:"Varia\xE7\xE3o em rela\xE7\xE3o ao dia anterior",style:{color:myColors[1]}},min:0,max:100,opposite:!0,labels:{format:"{value}%",style:{color:myColors[1]}}},!1),$("#br_novosobitos").highcharts().addSeries({name:"Aumento",yAxis:1,data:formatToChart(brasilData,"change_deaths")[0].data,tooltip:{valueSuffix:"%"}},!0);let f=formatToChart(brasilData,"CFR","date");createLineChart("br_CFR"),$("#br_CFR").highcharts().addSeries({name:"Taxa de letalidade",data:f[0].data},!1),$("#br_CFR").highcharts().update({chart:{marginTop:50},yAxis:{title:{text:"Varia\xE7\xE3o da letalidade"},labels:{format:"{value}%"}},title:{text:"Letalidade"},subtitle:{text:"A partir do 20\xBA \xF3bito"},tooltip:{shared:!1,valueSuffix:"%"},exporting:{buttons:{customButton:{enabled:!1}}}});let g=formatToColumnChart(getLastDate2(estados),"location","total_cases"),h=jQuery.extend(!0,{},g);for(i=0;i<h.series[0].data.length;i++){var k=h.series[0].data[i];k.y=Math.round(10000000*k.y/populacao[0][k.name])/100}h.series[0].data.sort((c,a)=>parseFloat(a.y)-parseFloat(c.y)),h.order=[...new Set(h.series[0].data.map(a=>a.name))],createColumnChart("estados_dist","casos"),$("#estados_dist").highcharts().addSeries({data:formatToColumnChart(getLastDate2(estados),"location","total_cases").series[0].data},!1),$("#estados_dist").highcharts().update({title:{text:"Distribui\xE7\xE3o de casos por estado"},xAxis:{crosshair:!0,categories:g.order},yAxis:{title:{text:"Casos confirmados"}},exporting:{buttons:{customButton:{text:"Por Habitantes",onclick:function(){"Por Habitantes"==this.exportSVGElements[2].text.textStr?(this.series[0].update({data:h.series[0].data},!1),this.xAxis[0].setCategories(h.order,!1),this.yAxis[0].setTitle({text:"Casos por 100 mil habitantes"}),this.exportSVGElements[2].attr({text:"Total"})):(this.series[0].update({data:g.series[0].data},!1),this.xAxis[0].setCategories(g.order,!1),this.yAxis[0].setTitle({text:"Casos confirmados"}),this.exportSVGElements[2].attr({text:"Por Habitantes"}))},theme:{width:80,"text-align":"center"}}}}});let l=formatToColumnChart(getLastDate2(estados),"location","total_deaths"),m=jQuery.extend(!0,{},l);for(i=0;i<m.series[0].data.length;i++){var k=m.series[0].data[i];k.y=Math.round(10000000*k.y/populacao[0][k.name])/100}m.series[0].data.sort((c,a)=>parseFloat(a.y)-parseFloat(c.y)),m.order=[...new Set(m.series[0].data.map(a=>a.name))],createColumnChart("estados_dist_obitos","\xF3bitos"),$("#estados_dist_obitos").highcharts().addSeries({data:formatToColumnChart(getLastDate2(estados),"location","total_deaths").series[0].data},!1),$("#estados_dist_obitos").highcharts().update({title:{text:"Distribui\xE7\xE3o de \xF3bitos por estado"},xAxis:{crosshair:!0,categories:l.order},yAxis:{title:{text:"\xD3bitos"}},exporting:{buttons:{customButton:{text:"Por Habitantes",onclick:function(){"Por Habitantes"==this.exportSVGElements[2].text.textStr?(this.series[0].update({data:m.series[0].data},!1),this.xAxis[0].setCategories(m.order,!1),this.yAxis[0].setTitle({text:"\xD3bitos por 100 mil habitantes"}),this.exportSVGElements[2].attr({text:"Total"})):(this.series[0].update({data:l.series[0].data},!1),this.xAxis[0].setCategories(l.order,!1),this.yAxis[0].setTitle({text:"\xD3bitos"}),this.exportSVGElements[2].attr({text:"Por Habitantes"}))},theme:{width:80,"text-align":"center"}}}}});var n=estados.filter(function(a){return a.location==$("#sel_estado").val()}),o=n[n.length-1].total_cases,p=n[n.length-1].total_deaths,q=Math.round(10000*p/o)/100;$("#data_estado_casos").html(numberWithSep(o)),$("#data_estado_obitos").html(numberWithSep(p)),$("#data_estado_CFR").html(q.toString().replace(".",",")+"%"),$("#sel_estado").change(function(){n=estados.filter(function(a){return a.location==$("#sel_estado").val()}),o=n[n.length-1].total_cases,p=n[n.length-1].total_deaths,q=Math.round(10000*p/o)/100,$("#data_estado_casos").html(numberWithSep(o)),$("#data_estado_obitos").html(numberWithSep(p)),$("#data_estado_CFR").html(q.toString().replace(".",",")+"%");let a=$("#estado_casos").highcharts();a.series[0].update({name:$("#sel_estado").val(),data:formatToChart(n,"total_cases")[0].data},!1),a.setTitle({text:"Casos confirmados - "+$("#sel_estado").val()});let b=$("#estado_obitos").highcharts();b.series[0].update({name:$("#sel_estado").val(),data:formatToChart(n,"total_deaths")[0].data},!1),b.setTitle({text:"\xD3bitos - "+$("#sel_estado").val()});let c=$("#estado_novoscasos").highcharts();c.series[0].update({name:$("#sel_estado").val(),data:formatToChart(n,"new_cases")[0].data},!1),c.setTitle({text:"Casos confirmados - "+$("#sel_estado").val()});let d=$("#estado_novosobitos").highcharts();d.series[0].update({name:$("#sel_estado").val(),data:formatToChart(n,"new_deaths")[0].data},!1),d.setTitle({text:"Novos \xF3bitos - "+$("#sel_estado").val()}),a.redraw(),b.redraw(),c.redraw(),d.redraw()}),createLineChart("estado_casos"),$("#estado_casos").highcharts().addSeries({name:$("#sel_estado").val(),data:formatToChart(n,"total_cases")[0].data},!1),$("#estado_casos").highcharts().update({yAxis:{title:{text:"Casos confirmados"}},title:{text:"Casos confirmados - "+$("#sel_estado").val()}}),createLineChart("estado_obitos"),$("#estado_obitos").highcharts().addSeries({name:$("#sel_estado").val(),data:formatToChart(n,"total_deaths")[0].data},!1),$("#estado_obitos").highcharts().update({yAxis:{title:{text:"\xD3bitos"}},title:{text:"\xD3bitos - "+$("#sel_estado").val()}}),createLineChart("estado_novoscasos"),$("#estado_novoscasos").highcharts().addSeries({name:$("#sel_estado").val(),data:formatToChart(n,"new_cases")[0].data},!1),$("#estado_novoscasos").highcharts().update({yAxis:{title:{text:"Novos casos"},min:0},title:{text:"Novos casos - "+$("#sel_estado").val()},exporting:{buttons:{customButton:{enabled:!1}}}},!0),createLineChart("estado_novosobitos"),$("#estado_novosobitos").highcharts().addSeries({name:$("#sel_estado").val(),data:formatToChart(n,"new_deaths")[0].data},!1),$("#estado_novosobitos").highcharts().update({yAxis:{title:{text:"\xD3bitos"},min:0},title:{text:"Novos \xF3bitos - "+$("#sel_estado").val()},exporting:{buttons:{customButton:{enabled:!1}}}},!0),createLineChart("estados_casos");let r=formatToChart(estados,"total_cases"),s=$("#estados_casos").highcharts();for(;0<s.series.length;)s.series[0].remove(!1);for(i=0;i<r.length;i++)s.addSeries({name:r[i].name,data:r[i].data},!1);s.update({yAxis:{title:{text:"Casos confirmados"}},title:{text:"Casos - todos estados"},legend:{align:"center",floating:!1,verticalAlign:"bottom",layout:"horizontal",enabled:!0,labelFormatter:function(){return acronyms[this.name]}},plotOptions:{line:{marker:{enabled:!1}}},exporting:{buttons:{customButton:{onclick:function(){changeType(this,!1)}}}}}),createLineChart("estados_obitos");let t=formatToChart(estados,"total_deaths"),u=$("#estados_obitos").highcharts();for(;0<u.series.length;)u.series[0].remove(!1);for(i=0;i<t.length;i++)u.addSeries({name:t[i].name,data:t[i].data},!1);u.update({yAxis:{title:{text:"\xD3bitos"}},title:{text:"\xD3bitos - todos estados"},legend:{align:"center",floating:!1,verticalAlign:"bottom",layout:"horizontal",enabled:!0,labelFormatter:function(){return acronyms[this.name]}}}),createLineChart("regiao_casos"),createLineChart("regiao_obitos"),$("#sel_regiao").change(function(){let a=formatToChart(estados.filter(function(a){return regioes[$("#sel_regiao").val()].includes(a.location)}),"total_cases"),b=$("#regiao_casos").highcharts();for(;0<b.series.length;)b.series[0].remove(!1);for(i=0;i<a.length;i++)b.addSeries({name:a[i].name,data:a[i].data},!1);b.update({yAxis:{title:{text:"Casos confirmados"}},title:{text:"Casos - "+$("#sel_regiao").val()},legend:{align:"center",floating:!1,verticalAlign:"bottom",layout:"horizontal",enabled:!0,labelFormatter:function(){return acronyms[this.name]}}});let c=formatToChart(estados.filter(function(a){return regioes[$("#sel_regiao").val()].includes(a.location)}),"total_deaths"),d=$("#regiao_obitos").highcharts();for(;0<d.series.length;)d.series[0].remove(!1);for(i=0;i<c.length;i++)d.addSeries({name:c[i].name,data:c[i].data},!1);d.update({yAxis:{title:{text:"\xD3bitos"}},title:{text:"\xD3bitos - "+$("#sel_regiao").val()},legend:{align:"center",floating:!1,verticalAlign:"bottom",layout:"horizontal",enabled:!0,labelFormatter:function(){return acronyms[this.name]}}})}),$("#sel_regiao").change();let w=formatToChart(alignData(estados,"total_cases","day"),"total_cases","day");for(createLineChart("estados_comp"),i=0;i<w.length;i++)$("#estados_comp").highcharts().addSeries({name:w[i].name,data:w[i].data},!1);$("#estados_comp").highcharts().update({yAxis:{type:"logarithmic",min:100,title:{text:"Casos confirmados"}},xAxis:{type:"linear",tickInterval:1,labels:{rotation:0},title:{text:"Dia"}},title:{text:"Casos confirmados ap\xF3s o 100\xBA caso"},legend:{align:"center",floating:!1,verticalAlign:"bottom",layout:"horizontal",enabled:!0,labelFormatter:function(){return acronyms[this.name]}},tooltip:{headerFormat:"<small>Dia {point.key}</small><br>"},exporting:{buttons:{customButton:{text:"Linear"}}}});let x=formatToColumnChart(getLastDate2(estados).filter(function(a){return 20<=a.total_deaths}),"location","CFR");createColumnChart("estados_CFR","123"),$("#estados_CFR").highcharts().addSeries({data:x.series[0].data},!1),$("#estados_CFR").highcharts().update({chart:{marginTop:70},title:{text:"Letalidade por estado"},xAxis:{crosshair:!0,categories:x.order},yAxis:{title:{text:"Letalidade"},labels:{format:"{value}%"}},tooltip:{formatter:function(){var a=this.points[0].point.name,b=this.points[0].point.deaths,c=this.points[0].point.cases;return"<small>"+a+":</small><br><b>"+this.y+"%</b> ("+b+" \xF3bitos / "+c+" casos)"}},subtitle:{text:"Como o valor da letalidade varia muito quando h\xE1 poucos casos, s\xF3 s\xE3o representados neste gr\xE1fico estados em que ocorreram ao menos 20 \xF3bitos",align:"left",y:30,margin:0}});let y=formatToChart(worldData,"total_cases","day_cases");createLineChart("world_comp");var z=$("#world_comp").highcharts();for(i=0;i<worldCompare.length;i++){let a=y.filter(function(a){return a.name==worldCompare[i]})[0];z.addSeries({name:worldTrad[a.name],data:a.data},!1)}z.update({yAxis:{title:{text:"Casos confirmados"},min:100,type:"logarithmic"},xAxis:{type:"linear",tickInterval:1,labels:{rotation:0},title:{text:"Dia"},min:1},title:{text:"Casos confirmados ap\xF3s o 100\xBA caso"},caption:{text:"Fontes: Minist\xE9rio da Sa\xFAde e Our World in Data"},legend:{enabled:!0},tooltip:{headerFormat:"<small>Dia {point.key}</small><br>"},exporting:{buttons:{customButton:{text:"Linear"}}}});let A=formatToChart(worldData,"total_deaths","day_deaths");createLineChart("world_comp_obitos");var B=$("#world_comp_obitos").highcharts();for(i=0;i<worldCompare.length;i++){let a=A.filter(function(a){return a.name==worldCompare[i]})[0];B.addSeries({name:worldTrad[a.name],data:a.data},!1)}B.update({yAxis:{title:{text:"\xD3bitos"},min:100,type:"logarithmic"},xAxis:{type:"linear",tickInterval:1,labels:{rotation:0},title:{text:"Dia"},min:1},title:{text:"\xD3bitos ap\xF3s o 100\xBA \xF3bito"},caption:{text:"Fonte: Our World in Data"},legend:{enabled:!0},tooltip:{headerFormat:"<small>Dia {point.key}</small><br>"},exporting:{buttons:{customButton:{text:"Linear"}}}});let C=getLastDate2(worldData).filter(function(a){return worldCompare.includes(a.location)||"World"==a.location}),D=formatToColumnChart(C,"location","CFR");createColumnChart("world_CFR"),$("#world_CFR").highcharts().addSeries({data:D.series[0].data},!1),$("#world_CFR").highcharts().update({title:{text:"Letalidade em diferentes pa\xEDses"},xAxis:{crosshair:!0,categories:D.order.map(a=>worldTrad[a])},yAxis:{title:{text:"Letalidade"},labels:{format:"{value}%"}},tooltip:{formatter:function(){var a=worldTrad[this.points[0].point.name],b=this.points[0].point.deaths,c=this.points[0].point.cases;return"<small>"+a+":</small><br><b>"+this.y+"%</b> ("+b+" \xF3bitos / "+c+" casos)"}},subtitle:{text:"Apenas alguns pa\xEDses que tem sido comparados ao Brasil s\xE3o representados neste gr\xE1fico. Diversos pa\xEDses possuem letalidade nesta faixa, mas n\xE3o s\xE3o mostrados.<br>A coluna 'Mundo' representa a m\xE9dia pelo n\xFAmero total de casos e \xF3bitos, e n\xE3o a m\xE9dia das letalidades de todos pa\xEDses."},caption:{text:"Fonte: Our World in Data"}});let E=worldData.filter(a=>100<=a.total_deaths),F=formatToChart(E,"CFR","day_deaths");for(createLineChart("world_CFR_comp"),i=0;i<worldCompare.length;i++){let a=F.filter(function(a){return a.name==worldCompare[i]})[0];$("#world_CFR_comp").highcharts().addSeries({name:worldTrad[a.name],data:a.data},!1)}$("#world_CFR_comp").highcharts().update({chart:{marginTop:50},yAxis:{title:{text:"Varia\xE7\xE3o da letalidade"},labels:{format:"{value}%"}},xAxis:{type:"linear",tickInterval:1,labels:{rotation:0},title:{text:"Dia"}},title:{text:"Compara\xE7\xE3o da evolu\xE7\xE3o da taxa letalidade em diferentes pa\xEDses"},subtitle:{text:"A partir do 100\xBA \xF3bito"},legend:{enabled:!0},tooltip:{shared:!1,valueSuffix:"%"},caption:{text:"Fonte: Our World in Data"},exporting:{buttons:{customButton:{enabled:!1}}}}),console.log("Time to generate HS plots: "+(new Date().getTime()-starttimeHS)+"ms"),$("#loading, #wall").hide()}document.addEventListener("DOMContentLoaded",function(){nomesEstados.forEach(function(a){$("#sel_estado").append(new Option(a,a))}),$("#sel_estado").val("Distrito Federal"),["Sudeste","Centro-Oeste","Nordeste","Sul","Norte"].forEach(function(a){$("#sel_regiao").append(new Option(a,a))}),starttimeW=new Date().getTime(),fetch(worldDataSource).then(function(a){a.text().then(function(a){rawWorldData=a,parseWorldData()})}),$.ajaxSetup({headers:{"x-parse-application-id":"unAFkcaNDeXajurGB7LChj8SgQYS2ptm"},error:function(){console.log("Erro (GET request failed): falha ao carregar dados do Minist\xE9rio da Sa\xFAde, utilizando dados em cache."),parseBrasilData(!1)}}),starttimeBR=new Date().getTime(),$.get(msGetURL,function(a){brasilDataSource=a.results[0].arquivo.url,"file:"!=window.location.protocol?fetch(brasilDataSource).then(function(a){a.text().then(function(a){rawBrasilData=a.replace("data","date").replace("estado","location").replace("casosNovos","new_cases").replace("casosAcumulados","total_cases").replace("obitosNovos","new_deaths").replace("obitosAcumulados","total_deaths"),parseBrasilData(!0)})}).catch(function(){console.log("Erro (file request failed): Falha ao carregar dados do Minist\xE9rio da Sa\xFAde, utilizando dados em cache."),parseBrasilData(!1)}):(console.log("Running locally and ignoring MS data."),parseBrasilData(!1))},"json")});